{"remainingRequest":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/forms/EpisodeForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/forms/EpisodeForm.vue","mtime":1565169491955},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n    name:'EpisodeForm',\n    data() {\n        return {\n            // getSeason: {},\n            Episodes:[\n                {\n                    season: {},\n                    episodeNumber:\"\",\n                    episodeTitle:\"\",\n                    episodeDescription:\"\",\n                    episodeVideoUrl:\"\",\n                    episodeImgUrls:{\n                        thumbnail:\"\",\n                        avatar:\"\"\n                    },\n                    crewList:null,\n                    userEmail:\"\",\n                } \n            ]\n        }\n    },\n    computed: {\n        ...mapGetters([\n            'season',\n            'episodes'\n        ])\n    },\n    methods:{\n        ...mapActions([\n            'addEpisodes',\n            'imageUpload'\n        ]),\n        addNewEmployeeForm(){\n            this.Episodes.push({\n                season: {},\n                    episodeNumber:\"\",\n                    episodeTitle:\"\",\n                    episodeDescription:\"\",\n                    episodeVideoUrl:\"\",\n                    episodeImgUrls:{\n                        thumbnail:\"\",\n                        avatar:\"\"\n                    },\n                    crewList:null,\n            })\n        },\n        deleteEmployeeForm(index) {\n            this.episodes.splice(index, 1)\n        },\n        handleSubmit() {\n            let counter = 1\n            if(this.episodes.totalElements>0) \n                counter = this.episodes.totalElements\n    \n            debugger\n            for(let i in this.episodes) {\n                this.Episodes[i].season = this.season\n                this.Episodes[i].episodeNumber = counter++\n                this.Episodes[i].userEmail = this.$session.get('email')\n            }\n            this.addEpisodes(this.Episodes).then( (resp) => {\n                if(resp) { \n                    this.$swal('','Successfully added','success')\n                    this.$router.push('/seasonalVideo')\n                } else {\n                    console.log(\"Something went wrong\")\n                }\n            }).catch( (err) => {\n                console.log(err)\n            })\n        },\n        processFile(event,type,index) {\n            if (type=='Thumbnail') {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Thumbnail')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink) {\n                        this.Episodes[index].episodeImgUrls.thumbnail = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            } else {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Avatar')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink) {\n                        this.Episodes[index].episodeImgUrls.avatar = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            }  \n        },\n        init() {\n            console.log()\n        }\n    },\n    mounted() {\n        this.init()\n    }\n}\n",{"version":3,"sources":["EpisodeForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EpisodeForm.vue","sourceRoot":"src/views/forms","sourcesContent":["<template>\n<div class=\"box\">\n    <h2 class=\"form-heading\">EPISODE FORM</h2>\n        <button class=\"btn btn-success\" @click=\"addNewEmployeeForm\">New Episode</button>\n        <div class=\"card mb-3\" v-for=\"(episode,index) in Episodes\" :key=\"episode.name\">\n        <div class=\"card-body\" >\n            <span  class=\"float-right\" style=\"cursor:pointer\" @click=\"deleteEmployeeForm(index)\">X</span>\n            <h4 class=\"ard-title\">Episode </h4>\n            <div class=\"employee-form\">\n                <div class=\"form-row\">\n                    <div class=\"form-group col-md-6\">\n                        <!-- <label>Program type</label> -->\n                        <input v-model=\"season.seasonName\" type=\"text\" class=\"form-control\" required readOnly>\n                    </div>\n                    <div class=\"form-group col-md-6\">\n                        <!-- <label for=\"inputPassword4\">Season name</label> -->\n                        <input v-model=\"episode.episodeTitle\"  type=\"text\" class=\"form-control\" placeholder=\"Episode name\" required>\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group col-md-6\">\n                        <!-- <label>Program type</label> -->\n                        <input v-model=\"episode.episodeDescription\" type=\"text\" class=\"form-control\" placeholder=\"Description\"  required>\n                    </div>\n                    <div class=\"form-group col-md-6\">\n                        <div class=\"col-md-6\">\n                            <input @change=\"processFile($event,'Thumbnail',index)\" type=\"file\" class=\"form-control\" required>\n                            <img height=\"50\" width=\"50\" v-if=\"episode.episodeImgUrls.thumbnail\" :src=\"episode.episodeImgUrls.thumbnail\" alt=\"\">\n                        </div>\n                        <div class=\"col-md-6\">\n                            <input @change=\"processFile($event,'Avatar',index)\" type=\"file\" class=\"form-control\" required>\n                            <img height=\"50\" width=\"50\" v-if=\"episode.episodeImgUrls.avatar\" :src=\"episode.episodeImgUrls.avatar\" alt=\"\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>  \n    <button @click=\"handleSubmit()\" type=\"submit\" class=\"btn btn-primary btn-submit\">Save episodes</button>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n    name:'EpisodeForm',\n    data() {\n        return {\n            // getSeason: {},\n            Episodes:[\n                {\n                    season: {},\n                    episodeNumber:\"\",\n                    episodeTitle:\"\",\n                    episodeDescription:\"\",\n                    episodeVideoUrl:\"\",\n                    episodeImgUrls:{\n                        thumbnail:\"\",\n                        avatar:\"\"\n                    },\n                    crewList:null,\n                    userEmail:\"\",\n                } \n            ]\n        }\n    },\n    computed: {\n        ...mapGetters([\n            'season',\n            'episodes'\n        ])\n    },\n    methods:{\n        ...mapActions([\n            'addEpisodes',\n            'imageUpload'\n        ]),\n        addNewEmployeeForm(){\n            this.Episodes.push({\n                season: {},\n                    episodeNumber:\"\",\n                    episodeTitle:\"\",\n                    episodeDescription:\"\",\n                    episodeVideoUrl:\"\",\n                    episodeImgUrls:{\n                        thumbnail:\"\",\n                        avatar:\"\"\n                    },\n                    crewList:null,\n            })\n        },\n        deleteEmployeeForm(index) {\n            this.episodes.splice(index, 1)\n        },\n        handleSubmit() {\n            let counter = 1\n            if(this.episodes.totalElements>0) \n                counter = this.episodes.totalElements\n    \n            debugger\n            for(let i in this.episodes) {\n                this.Episodes[i].season = this.season\n                this.Episodes[i].episodeNumber = counter++\n                this.Episodes[i].userEmail = this.$session.get('email')\n            }\n            this.addEpisodes(this.Episodes).then( (resp) => {\n                if(resp) { \n                    this.$swal('','Successfully added','success')\n                    this.$router.push('/seasonalVideo')\n                } else {\n                    console.log(\"Something went wrong\")\n                }\n            }).catch( (err) => {\n                console.log(err)\n            })\n        },\n        processFile(event,type,index) {\n            if (type=='Thumbnail') {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Thumbnail')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink) {\n                        this.Episodes[index].episodeImgUrls.thumbnail = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            } else {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Avatar')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink) {\n                        this.Episodes[index].episodeImgUrls.avatar = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            }  \n        },\n        init() {\n            console.log()\n        }\n    },\n    mounted() {\n        this.init()\n    }\n}\n</script>\n\n<style scoped>\n.box {\n    padding:10px;\n    height:100vh;\n    border-radius: 10px;\n}\n.form-heading {\n    text-align:center;\n    color: #2980B9;\n}\n.float-right {\n    float:right;\n}\n.card {\n    height:165px;\n    padding:10px;\n    margin-top:10px;\n    margin-bottom:10px;\n    border-radius: 10px;\n    /* border: 0.5px solid #333; */\n\tbox-shadow: 0px 8px 20px 0px rgba(0, 0, 0, 0.15);\n}\n.btn-submit {\n    margin:0 auto;\n    display: block;\n}\n</style>\n"]}]}