{"remainingRequest":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/babel-loader/lib/index.js!/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/eslint-loader/index.js??ref--13-0!/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/js/program.js?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/js/program.js","mtime":1565162060652},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport VueTagsInput from '@johmun/vue-tags-input';\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'Program',\n  computed: _objectSpread({}, mapGetters(['languages', 'getStackOfCategories'])),\n  components: {\n    VueTagsInput: VueTagsInput\n  },\n  data: function data() {\n    return {\n      program: {\n        type: \"\",\n        name: \"\",\n        description: \"\",\n        keywords: \"\",\n        parentalRating: \"\",\n        languages: \"\",\n        startDate: \"\",\n        expiryDate: \"\",\n        category: {\n          id: \"1\"\n        },\n        imgUrls: {\n          thumbnail: \"\",\n          avatar: \"\"\n        },\n        userId: null,\n        userEmail: \"\"\n      },\n      tag: '',\n      tags: []\n    };\n  },\n  methods: _objectSpread({}, mapActions(['addProgram', 'imageUpload', 'getLanguages']), {\n    init: function init() {\n      if (this.$route.params.name == \"singleVideo\") {\n        this.program.type = \"Single video program\";\n      } else if (this.$route.params.name == \"multiVideo\") {\n        this.program.type = \"Multi video program\";\n      } else {\n        this.program.type = \"Seasonal video program\";\n      }\n\n      this.getLanguages();\n    },\n    handleSubmit: function handleSubmit() {\n      var _this = this;\n\n      //change date to long\n      this.program.startDate = this.convertDateToLong(new Date(this.program.startDate));\n      this.program.expiryDate = this.convertDateToLong(new Date(this.program.expiryDate));\n      this.program.userId = this.$session.get('userId');\n      this.program.userEmail = this.$session.get('email');\n\n      for (var i = 0; i < this.tags.length; i++) {\n        if (i == 0) {\n          this.program.keywords = this.tags[i].text;\n        }\n\n        this.program.keywords = this.program.keywords + ',' + this.tags[i].text;\n      }\n\n      console.log(this.program.keywords);\n      debugger; //adding program to database \n\n      this.addProgram(this.program).then(function (resp) {\n        _this.$swal('', 'Successfully added', 'success');\n\n        if (_this.$route.params.name == \"singleVideo\") {\n          _this.$router.push('/singleVideoForm');\n        }\n\n        if (_this.$route.params.name == \"multiVideo\") {\n          _this.$router.push('/multiVideoForm');\n        }\n\n        if (_this.$route.params.name == \"seasonalVideo\") {\n          _this.$router.push('/seasonalVideoForm');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    convertDateToLong: function convertDateToLong(date) {\n      return date.getTime();\n    },\n    processFile: function processFile(event, type) {\n      var _this2 = this;\n\n      debugger;\n\n      if (type == 'Thumbnail') {\n        var formData = new FormData();\n        formData.append('file', event.target.files[0]);\n        formData.append('filetype', 'image');\n        formData.append('type', 'Thumbnail');\n        this.imageUpload(formData).then(function (resp) {\n          if (resp.uploadLink != \"\") {\n            _this2.program.imgUrls.thumbnail = resp.uploadLink;\n          } else {\n            _this2.$swal(resp.message);\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else {\n        var _formData = new FormData();\n\n        _formData.append('file', event.target.files[0]);\n\n        _formData.append('filetype', 'image');\n\n        _formData.append('type', 'Avatar');\n\n        this.imageUpload(_formData).then(function (resp) {\n          if (resp.uploadLink) {\n            _this2.program.imgUrls.avatar = resp.uploadLink;\n          } else {\n            _this2.$swal(resp.message);\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  }),\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"sources":["/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/js/program.js"],"names":["VueTagsInput","mapActions","mapGetters","name","computed","components","data","program","type","description","keywords","parentalRating","languages","startDate","expiryDate","category","id","imgUrls","thumbnail","avatar","userId","userEmail","tag","tags","methods","init","$route","params","getLanguages","handleSubmit","convertDateToLong","Date","$session","get","i","length","text","console","log","addProgram","then","resp","$swal","$router","push","catch","err","date","getTime","processFile","event","formData","FormData","append","target","files","imageUpload","uploadLink","message","mounted"],"mappings":"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","sourcesContent":["\nimport VueTagsInput from '@johmun/vue-tags-input';\n\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n    name:'Program',\n    computed:{\n        ...mapGetters([\n            'languages',\n            'getStackOfCategories'\n        ])\n    },\n    components:{\n        VueTagsInput\n    },\n    data() {\n        return {\n            program: {\n                type:\"\",\n                name:\"\",\n                description:\"\",\n                keywords:\"\",\n                parentalRating:\"\",\n                languages:\"\",\n                startDate:\"\",\n                expiryDate:\"\",\n                category: {\n                  id: \"1\",\n                },\n                imgUrls: {\n                    thumbnail: \"\",\n                    avatar: \"\",\n                },\n                userId:null,\n                userEmail:\"\",\n            },\n            tag:'',\n            tags: [],\n        }\n    },\n    methods: {\n        ...mapActions([\n            'addProgram',\n            'imageUpload',\n            'getLanguages'\n        ]),\n        init() {\n            if (this.$route.params.name == \"singleVideo\") {\n                this.program.type = \"Single video program\"\n            }\n            else if (this.$route.params.name == \"multiVideo\") {\n                this.program.type = \"Multi video program\"\n            }\n            else {\n                this.program.type = \"Seasonal video program\"\n            }\n            this.getLanguages()\n        },\n        handleSubmit() {\n            //change date to long\n            this.program.startDate = this.convertDateToLong(new Date(this.program.startDate))\n            this.program.expiryDate = this.convertDateToLong(new Date(this.program.expiryDate))\n            this.program.userId = this.$session.get('userId')\n            this.program.userEmail = this.$session.get('email')\n             \n            for(let i=0;i<this.tags.length;i++) {\n                if(i==0) {\n                    this.program.keywords = this.tags[i].text\n                }\n                this.program.keywords  = this.program.keywords+','+this.tags[i].text\n            }\n            console.log(this.program.keywords)\n            debugger\n            //adding program to database \n            this.addProgram(this.program).then( (resp) => {\n                this.$swal('','Successfully added','success')\n                if (this.$route.params.name == \"singleVideo\") {\n                    this.$router.push('/singleVideoForm')\n                }\n                if (this.$route.params.name == \"multiVideo\") {\n                    this.$router.push('/multiVideoForm')\n                }\n                if (this.$route.params.name == \"seasonalVideo\") {\n                    this.$router.push('/seasonalVideoForm')\n                }\n            }).catch( (err) => {\n                console.log(err)\n            })\n\n        },\n        convertDateToLong(date) {\n            return date.getTime()\n        },\n        processFile(event,type) {\n            debugger\n            if (type=='Thumbnail') {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Thumbnail')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink!=\"\") {\n                        this.program.imgUrls.thumbnail = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            } else {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Avatar')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink) {\n                        this.program.imgUrls.avatar = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            }\n             \n        },\n\n    },\n    mounted() {\n        this.init()\n    }\n    \n}"]}]}