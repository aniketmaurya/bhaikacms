{"remainingRequest":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/babel-loader/lib/index.js!/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/Program.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/src/views/Program.vue","mtime":1565155675400},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/sumansaurav/Desktop/bhaikacms/UI/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VueTagsInput from '@johmun/vue-tags-input';\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'Program',\n  computed: _objectSpread({}, mapGetters(['languages', 'getStackOfCategories'])),\n  component: {\n    VueTagsInput: VueTagsInput\n  },\n  data: function data() {\n    return {\n      program: {\n        type: \"\",\n        name: \"\",\n        description: \"\",\n        keywords: \"\",\n        parentalRating: \"\",\n        languages: \"\",\n        startDate: \"\",\n        expiryDate: \"\",\n        category: {\n          id: \"1\"\n        },\n        imgUrls: {\n          thumbnail: \"\",\n          avatar: \"\"\n        },\n        userId: null,\n        userEmail: \"\"\n      },\n      tag: '',\n      tags: []\n    };\n  },\n  methods: _objectSpread({}, mapActions(['addProgram', 'imageUpload', 'getLanguages']), {\n    init: function init() {\n      if (this.$route.params.name == \"singleVideo\") {\n        this.program.type = \"Single video program\";\n      } else if (this.$route.params.name == \"multiVideo\") {\n        this.program.type = \"Multi video program\";\n      } else {\n        this.program.type = \"Seasonal video program\";\n      }\n\n      this.getLanguages();\n    },\n    handleSubmit: function handleSubmit() {\n      var _this = this;\n\n      //change date to long\n      this.program.startDate = this.convertDateToLong(new Date(this.program.startDate));\n      this.program.expiryDate = this.convertDateToLong(new Date(this.program.expiryDate));\n      this.program.userId = this.$session.get('userId');\n      this.program.userEmail = this.$session.get('email'); //adding program to database \n\n      this.addProgram(this.program).then(function (resp) {\n        _this.$swal('', 'Successfully added', 'success');\n\n        if (_this.$route.params.name == \"singleVideo\") {\n          _this.$router.push('/singleVideoForm');\n        }\n\n        if (_this.$route.params.name == \"multiVideo\") {\n          _this.$router.push('/multiVideoForm');\n        }\n\n        if (_this.$route.params.name == \"seasonalVideo\") {\n          _this.$router.push('/seasonalVideoForm');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    convertDateToLong: function convertDateToLong(date) {\n      return date.getTime();\n    },\n    processFile: function processFile(event, type) {\n      var _this2 = this;\n\n      debugger;\n\n      if (type == 'Thumbnail') {\n        var formData = new FormData();\n        formData.append('file', event.target.files[0]);\n        formData.append('filetype', 'image');\n        formData.append('type', 'Thumbnail');\n        this.imageUpload(formData).then(function (resp) {\n          if (resp.uploadLink != \"\") {\n            _this2.program.imgUrls.thumbnail = resp.uploadLink;\n          } else {\n            _this2.$swal(resp.message);\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else {\n        var _formData = new FormData();\n\n        _formData.append('file', event.target.files[0]);\n\n        _formData.append('filetype', 'image');\n\n        _formData.append('type', 'Avatar');\n\n        this.imageUpload(_formData).then(function (resp) {\n          if (resp.uploadLink) {\n            _this2.program.imgUrls.avatar = resp.uploadLink;\n          } else {\n            _this2.$swal('File type not supported');\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  }),\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"sources":["Program.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div class=\"box\">\n    <form class=\"program-form\" style=\"padding:15px;\" @submit.prevent=\"handleSubmit()\">\n        <h2 class=\"form-heading\">PROGRAM FORM</h2>\n        <div class=\"form-row\">\n            <div class=\"form-group col-md-6\">\n                <label>Program type</label>\n                <input v-model=\"program.type\" type=\"text\" class=\"form-control \" required readOnly>\n            </div>\n            <div class=\"form-group col-md-6\">\n                <label for=\"inputPassword4\">Program name</label>\n                <input v-model=\"program.name\"  type=\"text\" class=\"form-control\" required>\n            </div>\n        </div>\n        <div class=\"form-group col-md-12\">\n            <label for=\"inputAddress\">Description</label>\n            <input v-model=\"program.description\"  type=\"text\" class=\"form-control\" required>\n        </div>\n        <div class=\"form-group col-md-12\">\n            <label for=\"inputAddress2\">Keywords</label>\n            <vue-tags-input v-model=\"tag\" :tags=\"tags\" @tags-changed=\"newTags => tags = newTags\"/>\n        </div>\n        <div class=\"form-row\">\n            <div class=\"form-group col-md-6\">\n                <label for=\"inputCity\">Parental rating</label>\n                <select class=\"form-control\" v-model=\"program.parentalRating\">\n                    <option value=\"7\">7+</option>\n                    <option value=\"13\">13+</option>\n                    <option value=\"18\">18+</option>\n                    <option value=\"all\">all</option>\n                </select>\n            </div>\n            <div class=\"form-group col-md-6\">\n                <label for=\"inputState\">Language</label>\n                <select class=\"form-control\" v-model=\"program.languages\">\n                    <option v-for=\"language in languages\" :key=\"language.name\" :value=\"language.name\">{{ language.name }}</option>\n                </select>\n            </div>\n        </div>\n        <div class=\"form-row\">\n            <div class=\"form-group col-md-4\">\n                <label for=\"inputCity\">Start date</label>\n                <input  v-model=\"program.startDate\" type=\"date\" class=\"form-control\" required>\n            </div>\n            <div class=\"form-group col-md-4\">\n                <label for=\"inputZip\">Expiry date</label>\n                <input v-model=\"program.expiryDate\" type=\"date\" class=\"form-control\" required>\n            </div>\n             <div class=\"form-group col-md-4\">\n                <label for=\"inputState\">Category</label>\n                <select id=\"inputState\" class=\"form-control\">\n                    <option v-for=\"element in getStackOfCategories\" :key=\"element\">{{ element }}</option>\n                </select>\n            </div>\n        </div>\n        <div class=\"form-row\">\n            <div class=\"form-group col-md-4\">\n                <label>Thumbnail</label>\n                <input @change=\"processFile($event,'Thumbnail')\" type=\"file\" class=\"form-control\" required>\n            </div>\n            <div class=\"form-group col-md-4\">\n                <label>Avatar</label>\n                <input @change=\"processFile($event,'Avatar')\" type=\"file\" class=\"form-control\" required>\n            </div>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">Save program</button>\n    </form>\n</div>   \n</template>\n\n<script>\n\nimport VueTagsInput from '@johmun/vue-tags-input';\n\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n    name:'Program',\n    computed:{\n        ...mapGetters([\n            'languages',\n            'getStackOfCategories'\n        ])\n    },\n    component:{\n        VueTagsInput\n    },\n    data() {\n        return {\n            program: {\n                type:\"\",\n                name:\"\",\n                description:\"\",\n                keywords:\"\",\n                parentalRating:\"\",\n                languages:\"\",\n                startDate:\"\",\n                expiryDate:\"\",\n                category: {\n                  id: \"1\",\n                },\n                imgUrls: {\n                    thumbnail: \"\",\n                    avatar: \"\",\n                },\n                userId:null,\n                userEmail:\"\",\n            },\n            tag:'',\n            tags: [],\n        }\n    },\n    methods: {\n        ...mapActions([\n            'addProgram',\n            'imageUpload',\n            'getLanguages'\n        ]),\n        init() {\n            if (this.$route.params.name == \"singleVideo\") {\n                this.program.type = \"Single video program\"\n            }\n            else if (this.$route.params.name == \"multiVideo\") {\n                this.program.type = \"Multi video program\"\n            }\n            else {\n                this.program.type = \"Seasonal video program\"\n            }\n            this.getLanguages()\n        },\n        handleSubmit() {\n            //change date to long\n            this.program.startDate = this.convertDateToLong(new Date(this.program.startDate))\n            this.program.expiryDate = this.convertDateToLong(new Date(this.program.expiryDate))\n            this.program.userId = this.$session.get('userId')\n            this.program.userEmail = this.$session.get('email')\n\n            //adding program to database \n            this.addProgram(this.program).then( (resp) => {\n                this.$swal('','Successfully added','success')\n                if (this.$route.params.name == \"singleVideo\") {\n                    this.$router.push('/singleVideoForm')\n                }\n                if (this.$route.params.name == \"multiVideo\") {\n                    this.$router.push('/multiVideoForm')\n                }\n                if (this.$route.params.name == \"seasonalVideo\") {\n                    this.$router.push('/seasonalVideoForm')\n                }\n            }).catch( (err) => {\n                console.log(err)\n            })\n\n        },\n        convertDateToLong(date) {\n            return date.getTime()\n        },\n        processFile(event,type) {\n            debugger\n            if (type=='Thumbnail') {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Thumbnail')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink!=\"\") {\n                        this.program.imgUrls.thumbnail = resp.uploadLink\n                    } else {\n                        this.$swal(resp.message)\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            } else {\n                let formData = new FormData()\n                formData.append('file', event.target.files[0])\n                formData.append('filetype','image')\n                formData.append('type','Avatar')\n                this.imageUpload(formData).then( (resp) => {\n                    if(resp.uploadLink) {\n                        this.program.imgUrls.avatar = resp.uploadLink\n                    } else {\n                        this.$swal('File type not supported')\n                    }\n                }).catch( (err) => {\n                    console.log(err)\n                })\n            }\n             \n        }\n\n    },\n    mounted() {\n        this.init()\n    }\n    \n}\n</script>\n\n<style>\n.box {\n    padding:20px;\n    margin:20px;\n    border-radius: 10px;\n\tbox-shadow: 0px 8px 20px 0px rgba(0, 0, 0, 0.15);\n}\n.form-heading {\n    text-align:center;\n    color: #2980B9;\n}\n\n</style>\n"],"sourceRoot":"src/views"}]}